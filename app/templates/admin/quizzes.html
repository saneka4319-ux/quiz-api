{% extends "admin/base.html" %}

{% block admin_content %}
<h3>üìö –í—Å–µ —Ç–µ—Å—Ç—ã ({{ quizzes|length }})</h3>

{% if quizzes %}
  <div style="overflow-x: auto;">
    <table style="width: 100%; border-collapse: collapse; margin-top: 1rem;">
      <thead>
        <tr style="border-bottom: 2px solid #333;">
          <th style="text-align: left; padding: 0.75rem;">ID</th>
          <th style="text-align: left; padding: 0.75rem;">–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–µ—Å—Ç–∞</th>
          <th style="text-align: left; padding: 0.75rem;">–û–ø–∏—Å–∞–Ω–∏–µ</th>
          <th style="text-align: left; padding: 0.75rem;">–í–ª–∞–¥–µ–ª–µ—Ü</th>
          <th style="text-align: left; padding: 0.75rem;">–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è</th>
          <th style="text-align: left; padding: 0.75rem;">–î–µ–π—Å—Ç–≤–∏—è</th>
        </tr>
      </thead>
      <tbody>
        {% for quiz in quizzes %}
          <tr style="border-bottom: 1px solid #333;">
            <td style="padding: 0.75rem;">{{ quiz.id }}</td>
            <td style="padding: 0.75rem;">
              <strong>{{ quiz.title }}</strong>
            </td>
            <td style="padding: 0.75rem;">{{ quiz.description|default('‚Äî', true)|truncate(50) }}</td>
            <td style="padding: 0.75rem;">
              {% if quiz.owner %}
                {{ quiz.owner.username }}
              {% else %}
                <span style="color: #f44336;">(–≤–ª–∞–¥–µ–ª–µ—Ü —É–¥–∞–ª–µ–Ω)</span>
              {% endif %}
            </td>
            <td style="padding: 0.75rem;">
              {% if quiz.created_at %}
                {{ quiz.created_at.strftime('%d.%m.%Y %H:%M') }}
              {% else %}
                <span style="color: #f44336;">–î–∞—Ç–∞ –Ω–µ —É–∫–∞–∑–∞–Ω–∞</span>
              {% endif %}
            </td>
            <td style="padding: 0.75rem;">
              <form action="/admin/quizzes/delete/{{ quiz.id }}" method="post" style="display: inline;" 
                    onsubmit="return confirm('–£–¥–∞–ª–∏—Ç—å —Ç–µ—Å—Ç ¬´{{ quiz.title }}¬ª?')">
                <button type="submit" class="btn" style="background: #f44336; padding: 0.3rem 0.6rem; font-size: 0.9rem;">–£–¥–∞–ª–∏—Ç—å</button>
              </form>
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
{% else %}
  <p style="color: #888; margin-top: 1rem;">–ù–µ—Ç —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤</p>
{% endif %}
{% endblock %}