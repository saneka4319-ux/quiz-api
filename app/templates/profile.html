{% extends "base.html" %}

{% block title %}–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å ‚Äî {{ username }}{% endblock %}

{% block content %}
<div class="card">
  <h2>üë§ –ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å</h2>
  <div style="margin-top: 1.5rem; display: flex; gap: 2rem;">
    <div style="flex: 1;">
      <p><strong>–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:</strong> {{ username }}</p>
      <p><strong>–î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:</strong> {{ user.created_at.strftime('%d.%m.%Y –≤ %H:%M') }}</p>
      <p><strong>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–µ—Å—Ç–æ–≤:</strong> {{ quizzes|length }}</p>
    </div>
    <div style="background: #252525; padding: 1rem; border-radius: 8px; flex: 1;">
      <h3 style="color: var(--primary); margin-bottom: 0.5rem;">üöÄ –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h3>
      <a href="/quizzes" class="btn" style="display: block; margin-top: 0.5rem;">–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Ç–µ—Å—Ç</a>
      <a href="/logout" class="btn btn-outline" style="display: block; margin-top: 0.5rem;" onclick="document.cookie='token=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/;'">–í—ã–π—Ç–∏ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞</a>
    </div>
  </div>

  <h3 style="margin-top: 2rem; color: var(--primary);">üìö –ú–æ–∏ —Ç–µ—Å—Ç—ã</h3>
  {% if quizzes %}
    <div style="margin-top: 1rem; display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 1rem;">
      {% for quiz in quizzes %}
        <div class="card" style="background: #252525; padding: 1rem;">
          <div style="display: flex; justify-content: space-between; align-items: start;">
            <strong>{{ quiz.title }}</strong>
            <span style="background: #4caf50; color: white; padding: 0.2rem 0.5rem; border-radius: 4px; font-size: 0.8rem;">{{ quiz.questions|length }} –≤–æ–ø—Ä–æ—Å–æ–≤</span>
          </div>
          {% if quiz.description %}
            <p style="color: #aaa; margin: 0.5rem 0; font-size: 0.9rem;">{{ quiz.description|truncate(60) }}</p>
          {% endif %}
          <div style="display: flex; gap: 0.5rem; margin-top: 0.8rem;">
            <a href="/quizzes/{{ quiz.id }}/take" class="btn btn-outline" style="flex: 1; font-size: 0.85rem; padding: 0.4rem;">–ü—Ä–æ–π—Ç–∏</a>
            <form action="/quizzes/{{ quiz.id }}/delete" method="post" style="flex: 1;" onsubmit="return confirm('–£–¥–∞–ª–∏—Ç—å —Ç–µ—Å—Ç ¬´{{ quiz.title }}¬ª?')">
              <button type="submit" class="btn" style="background: #f44336; width: 100%; font-size: 0.85rem; padding: 0.4rem;">–£–¥–∞–ª–∏—Ç—å</button>
            </form>
          </div>
        </div>
      {% endfor %}
    </div>
  {% else %}
    <div style="text-align: center; margin: 2rem 0; padding: 1.5rem; background: #252525; border-radius: 8px;">
      <p style="font-size: 1.2rem; margin-bottom: 1rem;">ü§î –£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç —Ç–µ—Å—Ç–æ–≤</p>
      <p style="color: #aaa; margin-bottom: 1.5rem;">–°–æ–∑–¥–∞–π—Ç–µ —Å–≤–æ–π –ø–µ—Ä–≤—ã–π —Ç–µ—Å—Ç –∏ –Ω–∞—á–Ω–∏—Ç–µ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –∑–Ω–∞–Ω–∏—è!</p>
      <a href="/quizzes" class="btn" style="padding: 0.75rem 1.5rem; font-size: 1.1rem;">–°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç</a>
    </div>
  {% endif %}
</div>
{% endblock %}